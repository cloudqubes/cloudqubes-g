<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.11.0"/><meta name="theme-color" content="#a2466c"/><meta name="description" content="An introduction to the fundamentals and concepts in networking in AWS." data-gatsby-head="true"/><meta name="image" content="https://www.cloudqubes.com/logo_v1.png" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:title" content="Introduction to Networking in AWS" data-gatsby-head="true"/><meta name="twitter:url" content="https://www.cloudqubes.com" data-gatsby-head="true"/><meta name="twitter:description" content="An introduction to the fundamentals and concepts in networking in AWS." data-gatsby-head="true"/><meta name="twitter:image" content="https://www.cloudqubes.com/logo_v1.png" data-gatsby-head="true"/><meta name="twitter:creator" content="@cloudqubes" data-gatsby-head="true"/><style data-href="/reponame/styles.ec9c685795f25abce049.css" data-identity="gatsby-global-css">.layout-module--main-header--0975f{border-bottom:2px solid #c21057aa;box-shadow:0 4px 4px -4px #c21057;display:flex;justify-content:center;margin-bottom:1rem;width:100%}.layout-module--inner-container--df4cb{display:flex;width:100%}@media only screen and (min-width:1200px){.layout-module--inner-container--df4cb{display:flex;width:90%}}.layout-module--logo-container--6ca7c{align-items:center;display:flex;flex-grow:1}.layout-module--logo--ff776{width:4rem}.layout-module--logo-text--e7423{color:#c21057;font-family:Titillium Web,sans-serif;font-size:38px;font-weight:400}.layout-module--nav-container--96fe9{display:flex;flex-grow:2;justify-content:space-around}.layout-module--nav-item-list--aaad3{display:flex;justify-content:space-around;list-style:none;width:100%}.layout-module--nav-item--3670c{display:inline-flex;font-size:1rem}.layout-module--footer--ad7d0{background-color:#c21057;display:flex;justify-content:center;padding-bottom:1rem;width:100%}.layout-module--footerCard--8fc61{flex-basis:50%;padding-bottom:1rem;padding-top:1rem}.layout-module--footerLogoContainer--67598{align-items:flex-end;display:flex;flex-basis:50%;justify-content:left;padding-bottom:1rem}.layout-module--footerLogo--cd38c{background-color:#fff;border-radius:2rem;width:4rem}.layout-module--footerLogoText--58444{color:#fff}.layout-module--footerAbout--6e9dd{color:#fff;padding-left:4rem}.layout-module--socialMediaIcons--19ec3{display:flex;justify-content:center}.layout-module--socialMediaLogo--1fd87{width:1.4rem}.layout-module--socialMediaLink--69be6{background-color:#fff;border-radius:2rem;margin-right:1rem;padding:.5rem}.layout-module--socialMediaLink--69be6:hover{background-color:#d4749bca}p{font-family:Titillium Web,sans-serif}h1,h2,h3,h4{font-weight:400;margin:0;padding:0}a,h1,h2,h3,h4{font-family:Raleway,sans-serif}a{text-decoration:none}body,ul{padding:0}body{margin:0;overflow-x:hidden;width:100%}.about-module--container--41d1b{display:flex;justify-content:center;width:100%}.about-module--inside-container--37fc5{width:100%}@media only screen and (min-width:1200px){.about-module--inside-container--37fc5{width:80%}}.blog-article-module--blog-article-item--77f8c{border-bottom:1px solid #8c8c8c;flex-basis:30%;margin-bottom:.2rem;padding-bottom:1rem}.blog-article-module--title--f5c09{color:#4d4d4d}.blog-article-module--title--f5c09:hover{color:#c21057}.blog-article-module--tag-link--30024{background-color:#f5f8ff;color:#546e7a;font-family:Raleway,sans-serif;font-size:1rem;margin-right:.2rem;padding:.1rem}.blog-article-module--tag-link--30024:hover{background-color:#e7edfd;text-decoration:none}.blog-article-module--post-meta--c0506{color:#8c8c8c;font-family:Titillium Web,sans-serif;font-size:.95rem}.index-module--container--efc35{display:flex;justify-content:center;width:100%}.index-module--inside-container--eedb3{width:100%}@media only screen and (min-width:1200px){.index-module--inside-container--eedb3{width:80%}}.index-module--blogArticleList--14500{display:flex;flex-wrap:wrap;justify-content:space-between}.article-module--outerContainer--119e3{display:flex;justify-content:center;width:100%}.article-module--container--2d8cc{width:100%}@media only screen and (min-width:1200px){.article-module--container--2d8cc{width:75%}}.article-module--title--f5d32{color:#c21057;font-family:Titillium Web,sans-serif;font-size:2.8rem}.article-module--post-meta--34964{color:#8c8c8c;font-family:Titillium Web,sans-serif;font-size:.95rem}li,p{margin-top:0;padding-top:0}.header-highlight,li,p{color:#2a2a2a;font-family:Titillium Web,sans-serif}.header-highlight{border-bottom:1px solid #2a2a2a;font-size:1.6rem;font-weight:400;margin-bottom:1rem}h1{color:#c21057;font-family:Titillium Web,sans-serif;font-size:26px;font-weight:400}h2{font-size:20px;padding-top:.5rem}h2,h3,h4,h5{color:#2a2a2a;font-family:Titillium Web,sans-serif;font-weight:600}h3,h4,h5{font-size:18px}.index-module--container--f8c32{display:flex;justify-content:center;width:100%}.index-module--newsletterOuterContainer--58d51{background-color:#c5cae9;display:flex;justify-content:center;padding-top:1rem;width:100%}.index-module--substackStyle--11694{background-color:#c5cae9}.index-module--inside-container--01d46{width:100%}@media only screen and (min-width:1200px){.index-module--inside-container--01d46{width:80%}}.index-module--newsletterContainer--437d4{align-items:center;display:flex;justify-content:space-around;width:100%}.index-module--blog-article-list--927c6{display:flex;flex-wrap:wrap;justify-content:space-between}.index-module--section-title--34611{padding-bottom:.8rem;padding-top:1.8rem}.tag-module--container--c379b{display:flex;justify-content:center;width:100%}.tag-module--inside-container--b0e69{width:100%}@media only screen and (min-width:1200px){.tag-module--inside-container--b0e69{width:80%}}.tag-module--blogArticleList--45e04{display:flex;flex-wrap:wrap;justify-content:space-between}.tag-module--title--fab01{color:#2a2a2a;font-family:Titillium Web,sans-serif;font-size:20px;font-weight:600;padding-bottom:.5rem}</style><link rel="preconnect" href="YOUR_SELF_HOSTED_ORIGIN"/><link rel="dns-prefetch" href="YOUR_SELF_HOSTED_ORIGIN"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="true"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,400;0,700;1,400&amp;family=Titillium+Web:ital,wght@0,400;0,600;0,700;1,400&amp;display=swap"/><link rel="icon" href="/reponame/favicon-32x32.png?v=c7817e006b3b3fde36d3536130dbde94" type="image/png"/><link rel="manifest" href="/reponame/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="192x192" href="/reponame/favicons/android-chrome-192x192.png?v=c7817e006b3b3fde36d3536130dbde94"/><link rel="apple-touch-icon" sizes="512x512" href="/reponame/favicons/android-chrome-512x512.png?v=c7817e006b3b3fde36d3536130dbde94"/><title data-gatsby-head="true">Introduction to Networking in AWS</title><link rel="icon" href="data:image/svg+xml,&lt;svg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 100 100&#x27;&gt;&lt;text y=&#x27;0.9em&#x27; font-size=&#x27;90&#x27;&gt;ðŸ‘¤&lt;/text&gt;&lt;/svg&gt;" data-gatsby-head="true"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><header class="layout-module--main-header--0975f"><div class="layout-module--inner-container--df4cb"><div class="layout-module--logo-container--6ca7c"><a href="/reponame/"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained layout-module--logo--ff776"><div style="max-width:400px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;400&#x27;%20width=&#x27;400&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/reponame/static/c7817e006b3b3fde36d3536130dbde94/d8057/logo_v1.webp 100w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/2e34e/logo_v1.webp 200w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/416c3/logo_v1.webp 400w" sizes="(min-width: 400px) 400px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 400px) 400px, 100vw" decoding="async" loading="lazy" data-src="/reponame/static/c7817e006b3b3fde36d3536130dbde94/d6138/logo_v1.png" data-srcset="/reponame/static/c7817e006b3b3fde36d3536130dbde94/15e42/logo_v1.png 100w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/5aead/logo_v1.png 200w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/d6138/logo_v1.png 400w" alt="cloudqubes logo"/></picture><noscript><picture><source type="image/webp" srcSet="/reponame/static/c7817e006b3b3fde36d3536130dbde94/d8057/logo_v1.webp 100w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/2e34e/logo_v1.webp 200w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/416c3/logo_v1.webp 400w" sizes="(min-width: 400px) 400px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 400px) 400px, 100vw" decoding="async" loading="lazy" src="/reponame/static/c7817e006b3b3fde36d3536130dbde94/d6138/logo_v1.png" srcSet="/reponame/static/c7817e006b3b3fde36d3536130dbde94/15e42/logo_v1.png 100w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/5aead/logo_v1.png 200w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/d6138/logo_v1.png 400w" alt="cloudqubes logo"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></a><a href="/reponame/"><h1 class="layout-module--logo-text--e7423">cloudqubes</h1></a></div><nav class="layout-module--nav-container--96fe9"><ul class="layout-module--nav-item-list--aaad3"><li class="layout-module--nav-item--3670c"><a href="/reponame/about/">About</a></li><li class="layout-module--nav-item--3670c"><a href="/reponame/blog/">Blog</a></li><li class="layout-module--nav-item--3670c"><a href="/reponame/contact/">Contact</a></li><li class="layout-module--nav-item--3670c"><a href="https://cloudqubes.substack.com/">Newsletter</a></li></ul></nav></div></header><main><div class="article-module--outerContainer--119e3"><article class="article-module--container--2d8cc"><div><span class="article-module--post-meta--34964">October 7, 2022<!-- --> - </span><span class="article-module--post-meta--34964">9 min read</span></div><h1 class="article-module--title--f5d32">Introduction to Networking in AWS</h1><p>Networking in AWS is quite different from networking in a private data center. You do not have to worry about managing hardware like switches, routers, or firewalls in AWS because everything is available as software. There are three main networking components in AWS.</p>
<h3>Amazon Virtual Private Cloud (VPC)</h3>
<p>A VPC is a logical network boundary for your cloud resources. Think of it as your private cloud hosted in AWS. Your AWS resources such as EC2 instances must reside in a VPC.</p>
<p>A VPC belongs to a particular AWS region and cannot be shared across two AWS regions. When you create a new account, AWS will automatically create a VPC in each region for you. This VPC is known as the default VPC, and you can create additional VPCs depending on your networking requirements. A VPC contains multiple subnets and route tables.</p>
<h3>Subnets</h3>
<p>A subnet in AWS closely resembles a VLAN in a private data center. Each subnet has a unique IP address range. No two subnets in the same VPC can have overlapping IP addresses. The resources in a VPC such as the EC2 instances are connected to subnets.</p>
<h3>Route tables</h3>
<p>Each subnet in the VPC must be associated with a route table. The route table defines a series of rules for routing IP packets. Two EC2 instances in separate subnets can communicate with each other if the subnets are associated with the same route table.</p>
<h1>Planning your VPCs in AWS</h1>
<p>There are certain services like AWS-managed databases, serverless functions, etc., that are located outside of VPCs. All other resources such as EC2 instances, firewalls, EKS clusters, etc., reside inside a VPC. You can use multiple VPCs to implement logical isolation among such resources. Certain use cases require this kind of logical isolation.</p>
<h3>Dev, test, and prod environments</h3>
<p>It is a good practice in software development to isolate the development, test, and production environments. Using a separate VPC for each environment can provide this isolation.</p>
<p>You can further enhance the separation by restricting access to the production VPC using the AWS IAM policies. Since separate VPCs can use overlapping IP CIDRs you can use the same IP design in all your development, test, and production setups.</p>
<h3>Multiple teams</h3>
<p>A large organization may have multiple development teams working on different software  applications. Keeping all these applications in a single VPC may lead to conflicts in IP address assignment, resource management, etc. By using separate VPCs, each team can work independently without the risk of affecting the other team.
IP Address Planning in VPCs
Each VPC must be assigned with an IPv4 CIDR block. This IP block can be from /28 to /16. Since VPCs are logically separated, the same IP CIDR can be used in two VPCs without any conflicts. AWS considers this IP range as private and does not allow you to directly expose them to the Internet. While you can assign any public or private IPv4 range to the VPC, AWS recommends using a private IP range defined as in RFC 1918.</p>
<p>Once you assign a CIDR block to a VPC, it is not possible to expand or change it. However, you can assign secondary CIDR blocks to a VPC.</p>
<p>A VPC can also have an IPv6 CIDR block. You can let AWS assign this IPv6 block or use your IPv6 blocks in some AWS regions.</p>
<h1>IP Assignment to Subnets</h1>
<p>A VPC can have multiple subnets. A subnet can be assigned with an IPv4 or IPv6 address range. These ranges must be within the main CIDR blocks assigned to the VPC. Two subnets cannot have overlapping IP ranges.</p>
<p>We all know that the first and the last IP address of a subnet are not usable because the first is the network address and the last is the broadcast address. In AWS there are three more IP addresses that cannot be assigned to resources. As an example, if your subnet is 10.0.2.0/28, below IP addresses are reserved by AWS.</p>
<p>10.0.2.0/28 - Network address
10.0.2.1/28 - Reserved by AWS for the Route table.
10.0.2.2/28 - Reserved by AWS for DNS purposes.
10.0.2.3/28 - Reserved by AWS for future use.
10.0.2.15/28 - Broadcast address</p>
<h2>VPC and AWS Availability zones</h2>
<p>Each AWS region has at least three or more availability zones. An availability zone is a physically separated data center in a particular region. A VPC can span across several availability zones, but a subnet must reside in one availability zone.</p>
<p><span><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 863px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/reponame/static/c9fe9d7a739e0502b5a79437cdc295cd/ee455/blog-aws-availability-zones.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 42.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+0lEQVR42l2R22sTQRTGvyabbvaSbZN0G7ctTdospm5sql3EeKkrYshiEgRh6Eu1KLJgpLaLNwTLWGyTilUoFDHoSxVf8iIUqSBCfO1ftc6kpZAOfJxzZub85hsOpmcry7n8jRoAZWDGGXQcKpSeflMqzV9xp76j2rYXsW07AscRTHdb5PXNl62B2/TnYNH/IPHaYWesX2Tqw9zKufU5v/CKFXAojbIQcpe+a+7Gvu7Sfc2ySH+x6Eum64qk3Q5zAPG/JKr0x1Bh4b3Cz1OFksL6+rvA66v5K5WtWZsD85v/ziQf0xGWCjDZi2lE4SFC2iRs0Y46tdE5C7sqA8wxTBEMBhoIaWcxegzkXwWlIZ7ktv5+zLx4szhVhqF7Wnb4PiZHN6UxcxviROPgtNno7Crl1/nhO3QStYaJu7vjeHZwyqhS+RiYSCQ0UIQCBH3YsdTmEs636sLVmWVk4k8wPkoxdvldLkZIEFa9vaH1h25xzbt1UZxvZlB7O4GV34ZR9eReh2wFAQN+mo6vPcKFz3XhmnkPWW0e2S7way4GL4jg+Z+RxoPypVUmEAbjTrtA2gNU+SAIIWGbVmXbM+TSQkpJ03SUy2B10SeS7bUiKTZ9FmU+DNBOFH5bgrcnn3SoHrlUkslcTNct9aQO9/VuTKUKClfvHZ0zJA78D4CCfwnb2OXlAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Availability zones"
        title=""
        src="/reponame/static/c9fe9d7a739e0502b5a79437cdc295cd/ee455/blog-aws-availability-zones.png"
        srcset="/reponame/static/c9fe9d7a739e0502b5a79437cdc295cd/5a46d/blog-aws-availability-zones.png 300w,
/reponame/static/c9fe9d7a739e0502b5a79437cdc295cd/0a47e/blog-aws-availability-zones.png 600w,
/reponame/static/c9fe9d7a739e0502b5a79437cdc295cd/ee455/blog-aws-availability-zones.png 863w"
        sizes="(max-width: 863px) 100vw, 863px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></span>
<em>Availability zones</em></p>
<p>You can distribute workloads across availability zones by provisioning resources in subnets belonging to different availability zones. It can improve the resiliency of the applications.</p>
<h2>Private and public subnets</h2>
<p>All IP ranges assigned to a VPC are considered private by AWS. So, all subnets in a VPC are also assigned private IP address ranges. You can connect some of the subnets in the VPC to an Internet Gateway. These subnets are called public subnets because the EC2 instances in these subnets can reach the Internet.</p>
<p><span><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 878px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/reponame/static/041788a39137cc0888c32a8ab19152c1/94829/blog-aws-public-and-private-subnets.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACD0lEQVR42p1SS2sTURT+2kQnZtKM7bySmcRJppNRLCQVRFKIjEnsi1DqJhQfiGUkjbaxsTY0SGEWVq2JYrMRBdGF6MKV4k4EQVwoFBcuuuiv8d5xYoWWgh74OI97v2/OmXNxPDO2oJunCwBYiGKIeD/Bgf/AQQIGOTu7PmKfmCUJZFlmPcF/BRWDG4/dG5qZvDs8SjNuZjGBcjnkHpXhsyz4KWj8Bw56yWkPgc/zPW5nXUF31N9FHHv4uROvr0wFTiIuXWB0pgQ9WEfU6EDU25CSG5C1xziM3bbTIc/zfd5XoTnTicSdiBZvQOEdKBcXcfRKAymxhciRNUTjD6AoTfCA5Z8y36QnjE6Y8vJGa7BmbNMue7sdumY4CFOiSyaCL6q+8acVFIVzMClia1CjSxDITcaULqcjoWGR0IJxNj8ksUnZW86OoOw4EtfM9cttUmvL7O16MLp8PRihseiIIZl4zdEC+4789z80W182hGsvS1CtGCaWB2Gtx5B9pKK5xWNpU0Dth4iVTW4PwV1LcU1Y/Zhibr1P4sYnGfPvlIW5SxnbttOYe6vi6qsYbn5QUXktGGTkce35yFn9GbevIGrfwnC+R7p4Us0X2nbxDEqrKZQaKThfFdz/2U+fjMZNJwZwKrzXyJwnGoR1XsBoVUJuVoRVETKFkkqB4jxPc7eeLQ+Qu4e8BQQ8bp8nxvwCNXFmiMm5s6wAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Public and private subnets in a VPC"
        title=""
        src="/reponame/static/041788a39137cc0888c32a8ab19152c1/94829/blog-aws-public-and-private-subnets.png"
        srcset="/reponame/static/041788a39137cc0888c32a8ab19152c1/5a46d/blog-aws-public-and-private-subnets.png 300w,
/reponame/static/041788a39137cc0888c32a8ab19152c1/0a47e/blog-aws-public-and-private-subnets.png 600w,
/reponame/static/041788a39137cc0888c32a8ab19152c1/94829/blog-aws-public-and-private-subnets.png 878w"
        sizes="(max-width: 878px) 100vw, 878px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></span>
<em>Public and private subnets</em></p>
<p>However, to reach the Internet the EC2 instance must have a public IP address. This is not a problem for IPv6 subnets. But, if it is an IPv4 subnet you must specifically assign a public IP address to the EC2 instances. There are two options for assigning a public IPv4 address.</p>
<h3>Auto Assign Public IP address</h3>
<p>An AWS subnet has a parameter that enables the automatic assignment of a public IPv4 address. Once it is enabled every time you launch an instance in that subnet, it will assign a public IPv4 address from a pool that is managed by AWS.</p>
<h3>Elastic IP address</h3>
<p>If you want to assign a static public IPv4 address, use the Elastic IP address. When you create an elastic IP address, AWS assigns a public IPv4 address from a pool that is either AWS-managed or user-owned. Then, you can assign this Elastic IP to EC2 instances and the public Ipv4 address will remain fixed until the Elastic IP is deleted.</p>
<h1>Elastic Network Interfaces (ENI)</h1>
<p>ENI is a virtual NIC in AWS. When you launch an EC2 instance, AWS creates an ENI and assigns it to the EC2. This ENI is known as the primary ENI. You can also attach secondary ENIs to an EC2 instance.</p>
<p>An ENI belongs to a subnet and is assigned an IPv4 or IPv6 address from the subnet. If the subnet is configured to auto-assign a public IPv4 address, the ENI will also be assigned a public IP address. Also, it is possible to associate an Elastic IP address to ENI so that the EC2 instance can use the Elastic IP.</p>
<p>An ENI can be attached or detached from an EC2 instance on the run. Once the ENI is attached to a new virtual machine, it will only provision the network interface. You must login to the EC2 instance and configure the interface IP address details.</p>
<h1>Internet Gateway</h1>
<p>An Internet Gateway provides Internet access to VPC resources such as EC2 that has a public IP address assigned. The corresponding subnet must have a default route to the Internet Gateway to facilitate this connectivity.</p>
<p>However, it is not recommended for EC2 instances in a production environment to be directly connected to the Internet via an Internet Gateway. You must always implement appropriate security controls such as firewalls when allowing Internet access to an EC2 instance.</p>
<h1>Securing VPC Resources</h1>
<p>Security Groups and Network ACLs are two mechanisms for filtering incoming or outgoing traffic of any resources in a VPC.</p>
<h2>Security Groups</h2>
<p>Security groups are stateful firewalls that can be attached to ENIs for filtering traffic. An ENI must have at least one security group, but you can also attach multiple security groups to one ENI.</p>
<p>A security group has multiple security rules. Each rule defines matching criteria for allowing traffic to pass and the traffic that is not matched to any rule is dropped.</p>
<p>Security groups operate at layer 4 of the OSI model. So, security rule criteria can contain IP CIDR and a TCP/UDP port number. The IP CIDR may be a specific IP or a range of IP addresses.</p>
<p>Instead of the IP CIDR, the security rule may refer to a security group as well. This security group could be the same security group to which the rule belongs or a different security group. This is useful for creating a rule that allows traffic between resources in the same VPC.</p>
<p>This mechanism is used in the default security group created in the default VPC of your account. It facilitates connectivity between any two instances you create in that VPC.</p>
<h2>Network ACLs</h2>
<p>Network ACLs are stateless firewalls associated with subnets in a VPC. A subnet must be associated with only one ACL, but an ACL can be assigned to multiple subnets.</p>
<p>A Network ACL has a set of rules which defines whether particular IP port combinations are allowed or denied. Each rule has a number that defines the priority where the lower number has a higher priority.. For each IP packet, AWS analyzes the rules in the priority order. When a rule is matched, the packet is allowed or denied and no further rules are analyzed.</p>
<p>Since network ACLs are stateless, you must define the corresponding rules to allow the return traffic for each inbound or outbound rule you add.</p>
<h1>Conclusions</h1>
<p>AWS has all the features and functions to implement a very robust networking architecture. This article introduces just its basic concepts. In upcoming articles, we will dive deeper into some of the topics that we introduced here.</p></article></div></main><footer class="layout-module--footer--ad7d0"><div class="layout-module--inner-container--df4cb"><div class="layout-module--footerCard--8fc61"><div class="layout-module--footerLogoContainer--67598"><a href="/reponame/"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained layout-module--footerLogo--cd38c"><div style="max-width:400px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;400&#x27;%20width=&#x27;400&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/reponame/static/c7817e006b3b3fde36d3536130dbde94/d8057/logo_v1.webp 100w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/2e34e/logo_v1.webp 200w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/416c3/logo_v1.webp 400w" sizes="(min-width: 400px) 400px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 400px) 400px, 100vw" decoding="async" loading="lazy" data-src="/reponame/static/c7817e006b3b3fde36d3536130dbde94/d6138/logo_v1.png" data-srcset="/reponame/static/c7817e006b3b3fde36d3536130dbde94/15e42/logo_v1.png 100w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/5aead/logo_v1.png 200w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/d6138/logo_v1.png 400w" alt="cloudqubes logo"/></picture><noscript><picture><source type="image/webp" srcSet="/reponame/static/c7817e006b3b3fde36d3536130dbde94/d8057/logo_v1.webp 100w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/2e34e/logo_v1.webp 200w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/416c3/logo_v1.webp 400w" sizes="(min-width: 400px) 400px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 400px) 400px, 100vw" decoding="async" loading="lazy" src="/reponame/static/c7817e006b3b3fde36d3536130dbde94/d6138/logo_v1.png" srcSet="/reponame/static/c7817e006b3b3fde36d3536130dbde94/15e42/logo_v1.png 100w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/5aead/logo_v1.png 200w,/reponame/static/c7817e006b3b3fde36d3536130dbde94/d6138/logo_v1.png 400w" alt="cloudqubes logo"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></a><a href="/reponame/"><h1 class="layout-module--footerLogoText--58444">cloudqubes</h1></a></div><div><a class="layout-module--footerAbout--6e9dd" href="/reponame/about/">About</a></div></div><div class="layout-module--footerCard--8fc61"><div class="layout-module--socialMediaIcons--19ec3"><a href="https://github.com/cloudqubes" class="layout-module--socialMediaLink--69be6"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained layout-module--socialMediaLogo--1fd87"><div style="max-width:240px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;240&#x27;%20width=&#x27;240&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/reponame/static/43ce87609eb221d09d4832a9c0e709d0/927d1/github-mark.webp 60w,/reponame/static/43ce87609eb221d09d4832a9c0e709d0/507b0/github-mark.webp 120w,/reponame/static/43ce87609eb221d09d4832a9c0e709d0/8d565/github-mark.webp 240w" sizes="(min-width: 240px) 240px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 240px) 240px, 100vw" decoding="async" loading="lazy" data-src="/reponame/static/43ce87609eb221d09d4832a9c0e709d0/87351/github-mark.png" data-srcset="/reponame/static/43ce87609eb221d09d4832a9c0e709d0/7ab40/github-mark.png 60w,/reponame/static/43ce87609eb221d09d4832a9c0e709d0/a8b52/github-mark.png 120w,/reponame/static/43ce87609eb221d09d4832a9c0e709d0/87351/github-mark.png 240w" alt="cloudqubes logo"/></picture><noscript><picture><source type="image/webp" srcSet="/reponame/static/43ce87609eb221d09d4832a9c0e709d0/927d1/github-mark.webp 60w,/reponame/static/43ce87609eb221d09d4832a9c0e709d0/507b0/github-mark.webp 120w,/reponame/static/43ce87609eb221d09d4832a9c0e709d0/8d565/github-mark.webp 240w" sizes="(min-width: 240px) 240px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 240px) 240px, 100vw" decoding="async" loading="lazy" src="/reponame/static/43ce87609eb221d09d4832a9c0e709d0/87351/github-mark.png" srcSet="/reponame/static/43ce87609eb221d09d4832a9c0e709d0/7ab40/github-mark.png 60w,/reponame/static/43ce87609eb221d09d4832a9c0e709d0/a8b52/github-mark.png 120w,/reponame/static/43ce87609eb221d09d4832a9c0e709d0/87351/github-mark.png 240w" alt="cloudqubes logo"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></a><a href="https://twitter.com/cloudqubes" class="layout-module--socialMediaLink--69be6"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained layout-module--socialMediaLogo--1fd87"><div style="max-width:2400px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;2453&#x27;%20width=&#x27;2400&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/reponame/static/c019bd434e5489eb40e386b60cf045c9/63168/logo-black.webp 600w,/reponame/static/c019bd434e5489eb40e386b60cf045c9/13b13/logo-black.webp 1200w,/reponame/static/c019bd434e5489eb40e386b60cf045c9/b4361/logo-black.webp 2400w" sizes="(min-width: 2400px) 2400px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2400px) 2400px, 100vw" decoding="async" loading="lazy" data-src="/reponame/static/c019bd434e5489eb40e386b60cf045c9/78e61/logo-black.png" data-srcset="/reponame/static/c019bd434e5489eb40e386b60cf045c9/7237d/logo-black.png 600w,/reponame/static/c019bd434e5489eb40e386b60cf045c9/02c57/logo-black.png 1200w,/reponame/static/c019bd434e5489eb40e386b60cf045c9/78e61/logo-black.png 2400w" alt="cloudqubes logo"/></picture><noscript><picture><source type="image/webp" srcSet="/reponame/static/c019bd434e5489eb40e386b60cf045c9/63168/logo-black.webp 600w,/reponame/static/c019bd434e5489eb40e386b60cf045c9/13b13/logo-black.webp 1200w,/reponame/static/c019bd434e5489eb40e386b60cf045c9/b4361/logo-black.webp 2400w" sizes="(min-width: 2400px) 2400px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2400px) 2400px, 100vw" decoding="async" loading="lazy" src="/reponame/static/c019bd434e5489eb40e386b60cf045c9/78e61/logo-black.png" srcSet="/reponame/static/c019bd434e5489eb40e386b60cf045c9/7237d/logo-black.png 600w,/reponame/static/c019bd434e5489eb40e386b60cf045c9/02c57/logo-black.png 1200w,/reponame/static/c019bd434e5489eb40e386b60cf045c9/78e61/logo-black.png 2400w" alt="cloudqubes logo"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></a></div></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="YOUR_SELF_HOSTED_ORIGIN/gtag/js?id=GA-TRACKING_ID"></script><script>
      window.excludeGtagPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/,/^(?:\/do\-not\-track\/me\/too\/)$/];
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='GA-TRACKING_ID',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(!(navigator.doNotTrack == "1" || window.doNotTrack == "1")) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'GA-TRACKING_ID', {"optimize_id":"OPT_CONTAINER_ID","anonymize_ip":true,"cookie_expires":0,"send_page_view":false});gtag('config', 'AW-CONVERSION_ID', {"optimize_id":"OPT_CONTAINER_ID","anonymize_ip":true,"cookie_expires":0,"send_page_view":false});gtag('config', 'DC-FLOODIGHT_ID', {"optimize_id":"OPT_CONTAINER_ID","anonymize_ip":true,"cookie_expires":0,"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/introduction-to-networking-in-aws/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-99df59895fe43cd139fd.js\"],\"component---src-pages-404-js\":[\"/component---src-pages-404-js-e0852996b6bca8f74aa4.js\"],\"component---src-pages-about-js\":[\"/component---src-pages-about-js-9c7435f04178a6da9c8d.js\"],\"component---src-pages-blog-index-js\":[\"/component---src-pages-blog-index-js-b8b3dc705cca64c2932e.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-ansible-for-verifying-configurations-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-ansible-for-verifying-configurations-index-mdx-afe6398166433d3038cb.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-docker-cli-quick-reference-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-docker-cli-quick-reference-index-mdx-c994075bab761847891f.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-how-to-choose-the-best-database-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-how-to-choose-the-best-database-index-mdx-cf60e62701df65bb1bf7.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-how-to-extend-root-disk-ubuntu-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-how-to-extend-root-disk-ubuntu-index-mdx-f6c4ac73f54cbde106d5.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-how-to-set-up-private-git-server-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-how-to-set-up-private-git-server-index-mdx-188e8075cc83e739a35d.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-how-to-use-ingress-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-how-to-use-ingress-index-mdx-084bec8f68795acd706b.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-ingress-vs-ingress-controller-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-ingress-vs-ingress-controller-index-mdx-6736286014ae3db7976a.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-introduction-to-kubernetes-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-introduction-to-kubernetes-index-mdx-efb76b76e6a376ab8ca1.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-introduction-to-networking-in-aws-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-introduction-to-networking-in-aws-index-mdx-9895191b0eac61ffa9cf.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-managing-multiple-github-accounts-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-managing-multiple-github-accounts-index-mdx-b909daa96e6293791344.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-private-container-registry-with-harbor-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-private-container-registry-with-harbor-index-mdx-49f67c5889dd97fa1b2b.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-running-applications-on-kubernetes-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-running-applications-on-kubernetes-index-mdx-ebb2699c9ab094dd4296.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-what-is-a-kubernetes-service-index-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-what-is-a-kubernetes-service-index-mdx-d141ab8106acd861861d.js\"],\"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-pages-contat-mdx\":[\"/component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-pages-contat-mdx-9326d65683be0f96cc1c.js\"],\"component---src-pages-contact-js\":[\"/component---src-pages-contact-js-02427b5b2070026b4355.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-c30b3eac07dce0bf40ec.js\"],\"component---src-templates-tag-js\":[\"/component---src-templates-tag-js-5cc1516838474c58ac19.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="02a25c0e28664a0ffa30";</script><script src="/reponame/webpack-runtime-7629d094d2c25b368a50.js" async></script><script src="/reponame/framework-9e8f4a38befa1ae8eeac.js" async></script><script src="/reponame/app-99df59895fe43cd139fd.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>