{"version":3,"file":"component---src-pages-blog-mdx-frontmatter-slug-js-content-file-path-blog-how-to-use-ingress-index-mdx-084bec8f68795acd706b.js","mappings":"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","sources":["webpack://cloudqubes/./blog/how-to-use-ingress/index.mdx","webpack://cloudqubes/./src/pages/blog/{mdx.frontmatter__slug}.js","webpack://cloudqubes/./src/hooks/use-site-metadata.jsx","webpack://cloudqubes/./src/components/seo.js","webpack://cloudqubes/./src/pages/blog/article.module.css","webpack://cloudqubes/./node_modules/@mdx-js/react/lib/index.js"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    span: \"span\",\n    em: \"em\",\n    h1: \"h1\",\n    pre: \"pre\",\n    code: \"code\",\n    h2: \"h2\",\n    ul: \"ul\",\n    li: \"li\",\n    strong: \"strong\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    class: \"header-highlight\"\n  }, React.createElement(_components.p, null, \"Ingress is the preferred way of exposing HTTP applications in Kubernetes. It can manipulate HTTP requests and route traffic to multiple applications inside the cluster.\")), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.a, {\n    href: \"https://kubernetes.io/docs/concepts/services-networking/ingress/\"\n  }, \"Kubernetes ingress\"), \" is a mechanism for exposing applications running inside a Kubernetes cluster via HTTP or HTTPS.\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 839px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/ba8e49cf0aac786ed9178a2e0e206f40/d26aa/k8s-ingress-simplified.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 49.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABVklEQVR42o1Sa2+DMAzs//97k9iX0SEEDMj7AbQrcLND23VdOy3SYZQ457Mvu3mesSzLL1z27+NjzNfzHX8era7rUBQFqqpCWZbQWiOEAO89fPDnGDb4gHEcsBDpQ8J1XeEoSWsDay2EEAlKaSgi1meYvoEXNUTXwDq3KeTLp+OEmXAi7ulzxXFeMTqBwXSkysMYQwU8olOYbIvgTCoWZI3JSzj5kc43QlKki1dCBhOPqNUAYQIWvceq36BFi7Zt0fc9BlkCdg/dlqRYIVqJAxXQSqYRJEJuMQ4Dxmn60baqc/TvL/DUilIKhloPRmAkUm8UpFTwssKBFFrRfCu8zJBbv129kKibNlXmeTkiDiEmA5IhFIPuEBXNT3Zp5k9dZvKBVEdykJ1lhQw2iNvPsgx5nieDNtNkKvjns4kxpiRWw5Evsjkc78H7nH99Ns8e9n9wm8v/XznZBSHmrvCkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"Kubernetes ingress - simplified\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/ba8e49cf0aac786ed9178a2e0e206f40/d26aa/k8s-ingress-simplified.png\\\"\\n        srcset=\\\"/static/ba8e49cf0aac786ed9178a2e0e206f40/5a46d/k8s-ingress-simplified.png 300w,\\n/static/ba8e49cf0aac786ed9178a2e0e206f40/0a47e/k8s-ingress-simplified.png 600w,\\n/static/ba8e49cf0aac786ed9178a2e0e206f40/d26aa/k8s-ingress-simplified.png 839w\\\"\\n        sizes=\\\"(max-width: 839px) 100vw, 839px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.em, null, \"Kubernetes ingress - simplified\")), \"\\n\", React.createElement(_components.p, null, \"This is a simple representation of Kubernetes ingress. To learn how ingress works, you can read up on \", React.createElement(_components.a, {\n    href: \"../ingress-vs-ingress-controller\"\n  }, \"Kubenetes ingress vs ingress controller\"), \".\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.a, {\n    href: \"https://cloudqubes.substack.com/i/106867327/nodeport\"\n  }, \"NodePort\"), \" or \", React.createElement(_components.a, {\n    href: \"https://cloudqubes.substack.com/i/111987521/loadbalancer-services\"\n  }, \"LoadBalancer\"), \" Services also can expose an application running inside a cluster. But, both \", React.createElement(_components.a, {\n    href: \"https://cloudqubes.substack.com/i/106867327/nodeport\"\n  }, \"NodePort\"), \" and \", React.createElement(_components.a, {\n    href: \"https://cloudqubes.substack.com/i/111987521/loadbalancer-services\"\n  }, \"LoadBalancer\"), \" Services work in layer-3 in the OSI model.\"), \"\\n\", React.createElement(_components.p, null, \"Ingress works with HTTP protocol in layer-7 so offers more flexibility for HTTP-based applications. Also, ingress does not have some of the limitations in \", React.createElement(_components.a, {\n    href: \"https://cloudqubes.substack.com/i/106867327/nodeport\"\n  }, \"NodePort\"), \" or \", React.createElement(_components.a, {\n    href: \"https://cloudqubes.substack.com/i/111987521/loadbalancer-services\"\n  }, \"LoadBalancer\"), \" Services.\"), \"\\n\", React.createElement(_components.p, null, \"So, ingress should be your preferred way for exposing HTTP applications inside a Kubernetes cluster to external clients.\"), \"\\n\", React.createElement(_components.p, null, \"An ingress defines a set of rules for routing HTTP traffic. You can use these rules to manipulate HTTP requests.\"), \"\\n\", React.createElement(_components.p, null, \"Let's check out three such usecases of ingress rules for handling HTTP traffic.\"), \"\\n\", React.createElement(_components.h1, null, \"Kubernetes cluster setup\"), \"\\n\", React.createElement(_components.p, null, \"We are using \", React.createElement(_components.a, {\n    href: \"https://microk8s.io\"\n  }, \"MicroK8s\"), \" from Canonical as our Kubernetes platform for this demonstration.\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.a, {\n    href: \"https://microk8s.io\"\n  }, \"MicroK8s\"), \" includes \", React.createElement(_components.a, {\n    href: \"https://github.com/kubernetes/ingress-nginx\"\n  }, \"Ingress NGINX Controller\"), \" as an add-on. Since \", React.createElement(_components.a, {\n    href: \"https://github.com/kubernetes/ingress-nginx\"\n  }, \"Ingress NGINX controller\"), \" is deployed inside the cluster, we need to place a load balancer in front of the ingress controller. So we'll use \", React.createElement(_components.a, {\n    href: \"https://metallb.universe.tf\"\n  }, \"MetalLB\"), \" load balancer which also comes as an add-on in \", React.createElement(_components.a, {\n    href: \"https://microk8s.io\"\n  }, \"MicroK8s\"), \".\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 978px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/2e6c4731acda16f8ab04929a2d707aa2/914c7/k8s-ingress-microk8s.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 41.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABRElEQVR42n2S226DMBBE8/9/1vc+Jo0QpebiO2DAgKe7hkRRW9XSCO9KO4yPfdn3HSmlX+L+MAzw3qPveyzLgnVdD8VI3/isY1yf+wsP/rW4L+oaVVXh60vAWgtjDJSSJJ2lNYlqqzqqFaZpOg33jVLtmNeEKVK6RK0YMDiNkVKOTsE7l4dyYiOzjHVwbYWgPmFkgzEEMtw2mPIKTw3ZL2gtGY0BCBKLFTRQAvYK11Vo2g5SdlhNgUXe0TQNevrp5FoYrTDS3IV5eaOwzOE8bMpyskYnSshG4P7+BquPo1pKOugao20ooYWVAqMWMKo9DF8ZplO8pnmG0sSMON2LMhsxM74g3w+0NwcCSwk9cXwk/O9SmJf3LnP0pyGb8LcoCtxuHxmBIjMpJQIz3IghD/8U92dKyeLbe90/an5Kj5oV6Tl9A0LYaWwRFs9CAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"Microk8s cluster\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/2e6c4731acda16f8ab04929a2d707aa2/914c7/k8s-ingress-microk8s.png\\\"\\n        srcset=\\\"/static/2e6c4731acda16f8ab04929a2d707aa2/5a46d/k8s-ingress-microk8s.png 300w,\\n/static/2e6c4731acda16f8ab04929a2d707aa2/0a47e/k8s-ingress-microk8s.png 600w,\\n/static/2e6c4731acda16f8ab04929a2d707aa2/914c7/k8s-ingress-microk8s.png 978w\\\"\\n        sizes=\\\"(max-width: 978px) 100vw, 978px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.em, null, \"MicroK8s cluster\")), \"\\n\", React.createElement(_components.p, null, \"Since this MicroK8s cluster is installed in a single virtual machine, our application will be accessible only via localhost (127.0.0.1). But in a production Kubernetes cluster the application will be avialble from one of the public IPs in the load balancer.\"), \"\\n\", React.createElement(_components.p, null, \"Let's enable both add-ons in the cluster.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-yaml\"\n  }, \"microk8s enable ingress\\nmicrok8s enable metallb\\n\")), \"\\n\", React.createElement(_components.p, null, \"Check the status of Ingress NGINX Controller.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"kubectl get pods -n ingress\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"NAME                                      READY   STATUS    RESTARTS   AGE\\nnginx-ingress-microk8s-controller-8672t   1/1     Running   0          2m10s\\n\")), \"\\n\", React.createElement(_components.p, null, \"Check the status of MetalLB\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"kubectl get pods -n metallb-system\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"NAME                         READY   STATUS    RESTARTS      AGE\\nspeaker-xfbbt                1/1     Running   6 (72d ago)   14m\\ncontroller-9556c586f-g9r7w   1/1     Running   3 (72d ago)   14m\\n\")), \"\\n\", React.createElement(_components.p, null, \"If all Pods are in \", React.createElement(_components.code, null, \"Running \"), \" status, you can proceed to the next step.\"), \"\\n\", React.createElement(_components.h1, null, \"The number-crunch application\"), \"\\n\", React.createElement(_components.p, null, \"We will use \", React.createElement(_components.a, {\n    href: \"https://github.com/cloudqubes/number-crunch\"\n  }, \"number-crunch\"), \" application for this ingress use cases demonstration.\"), \"\\n\", React.createElement(_components.p, null, \"The \", React.createElement(_components.code, null, \"number-crunch\"), \" is a simple HTTP server with two API endpoints that calculate the square root and the cube root of a number.\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/65a3e17afa0d39b2f3d90a566c69efa8/c5bb3/k8s-ingress-number-crunch-app-only.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 37.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAyUlEQVR42qWR2aqFMAxF/f//E30QxBGrCM5ap326Ay3lPl3OCSzSpO1OkwbPfeN9HjwWEwt+zua9WB8H9n0XDrJtuK8LAQ9+Y8uyCOu6Yp5njOOIi4Lv+6Lve2EYBuR5jjRN0TQNuq4TT6qqgtZaLvFVFCvLElEUQZl9ip7niQBGULUtlFJojU+SBHEcI8sy1HWNoijcmsWnaZJC9LwThqEUdIKcB42H/+LPjLFvtk0fadkK/tdssc18Audn/WpG4ATdz/6CEaPWBylqIMKsSlxEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"number-crunch application\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/65a3e17afa0d39b2f3d90a566c69efa8/c5bb3/k8s-ingress-number-crunch-app-only.png\\\"\\n        srcset=\\\"/static/65a3e17afa0d39b2f3d90a566c69efa8/5a46d/k8s-ingress-number-crunch-app-only.png 300w,\\n/static/65a3e17afa0d39b2f3d90a566c69efa8/0a47e/k8s-ingress-number-crunch-app-only.png 600w,\\n/static/65a3e17afa0d39b2f3d90a566c69efa8/c5bb3/k8s-ingress-number-crunch-app-only.png 680w\\\"\\n        sizes=\\\"(max-width: 680px) 100vw, 680px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.em, null, \"number-crunch application\")), \"\\n\", React.createElement(_components.h2, null, \"Creating the Deployment\"), \"\\n\", React.createElement(_components.p, null, \"We will deploy \", React.createElement(_components.code, null, \"number-crunch\"), \" with two replicas in our MicroK8s cluster.\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 901px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/1a2493452edbf4fc4078f0a185ba764a/0955e/k8s-ingress-number-crunch-1-without-prefix.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 46.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABe0lEQVR42n1S226DMAzt/3/btqd22kO7lbYEUO4Q7oEzO6XVpE0LsuKg42P72LsYI9ZlwbIZ++u6JpvGEaFt0f5noSGrEUKLkfA7Jvl1lhnEjGma4L2Hdwa1r1HX9f1tDTz5zlo0WqC1ZcL0w0CEVCGfoAoEXREPVdxKoFMEoAopYHVnNKaCdTU6V6W3J7xWCq0p0JHV3mFgwrgRGnGBLW+IccbclIitonZ7+DJDL/ZwUkAqA12cMcojpMiglEZnq5TkSfhoeZoj4uZn2Rla6+Rfrle8vb5QsETTNDh9fmF/OOB2y6llkkLlCFwhtTwMPzXkQfBH7zjPaSgssiWdnPNJO9aQSflfw3qSnY5HfLwfUBRF0vzPoTBZqpoATBBokvc7pMl2XfecMpMbY1LC1PKjEikl8jxPmTiQTz9M6PoefT9gpqo5WAiRcFVVJVmWbc345nnsuEXeN0tZFJEaAnEC/s9rwGTDOIG3gTEFEQoiLCmxd+4u1YOUMN9WELVjXLUkjwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"number-crunch application deployment\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/1a2493452edbf4fc4078f0a185ba764a/0955e/k8s-ingress-number-crunch-1-without-prefix.png\\\"\\n        srcset=\\\"/static/1a2493452edbf4fc4078f0a185ba764a/5a46d/k8s-ingress-number-crunch-1-without-prefix.png 300w,\\n/static/1a2493452edbf4fc4078f0a185ba764a/0a47e/k8s-ingress-number-crunch-1-without-prefix.png 600w,\\n/static/1a2493452edbf4fc4078f0a185ba764a/0955e/k8s-ingress-number-crunch-1-without-prefix.png 901w\\\"\\n        sizes=\\\"(max-width: 901px) 100vw, 901px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.em, null, \"number-crunch application deployment\")), \"\\n\", React.createElement(_components.p, null, \"Copy and paste this YAML manifest into \", React.createElement(_components.code, null, \"number-crunch-deployment.yml\"), \".\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-yaml\"\n  }, \"apiVersion: apps/v1\\nkind: Deployment\\nmetadata:\\n  name: number-crunch-app\\nspec:\\n  selector:\\n    matchLabels:\\n      app: number-crunch-app\\n  replicas: 2 \\n  template:\\n    metadata:\\n      labels:\\n        app: number-crunch-app\\n    spec:\\n      containers:\\n      - name: number-crunch-app\\n        image: cloudqubes/number-crunch:1.0.1\\n        ports:\\n        - containerPort: 8080\\n\")), \"\\n\", React.createElement(_components.p, null, \"Create the deployment.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"kubectl apply -f number-crunch-deployment.yml\\n\")), \"\\n\", React.createElement(_components.p, null, \"Check the status of the pods.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"kubectl get pods\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"NAME                                 READY   STATUS    RESTARTS       AGE     \\nnumber-crunch-app-5866dd4d7f-zslzf   1/1     Running   0              3m33s\\nnumber-crunch-app-5866dd4d7f-74w9v   1/1     Running   0              3m33s\\n\")), \"\\n\", React.createElement(_components.p, null, \"Since both pods are running, let's create the Service,\"), \"\\n\", React.createElement(_components.h2, null, \"Creating the Service\"), \"\\n\", React.createElement(_components.p, null, \"We need a Kubernetes Service to be used as the backend for the ingress.\"), \"\\n\", React.createElement(_components.p, null, \"Copy and paste this YMAL manifest into \", React.createElement(_components.code, null, \"number-crunch-service.yml\"), \".\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-yaml\"\n  }, \"apiVersion: v1\\nkind: Service\\nmetadata:\\n  name: number-crunch-service\\nspec:\\n  selector:\\n    app: number-crunch-app\\n  ports:\\n  - name: number-crunch-service-port\\n    protocol: TCP\\n    port: 3001\\n    targetPort: 8080\\n\")), \"\\n\", React.createElement(_components.p, null, \"Create \", React.createElement(_components.code, null, \"number-crunch-service\"), \".\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"kubectl apply -f number-crunch-service.yml \\n\")), \"\\n\", React.createElement(_components.p, null, \"Check the \", React.createElement(_components.code, null, \"number-crunch-service\"), \".\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"kubectl get services\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"NAME                    TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE\\nnumber-crunch-service   ClusterIP      10.152.183.17    <none>        3001/TCP         5m10s\\n\")), \"\\n\", React.createElement(_components.h1, null, \"Use case #1: Exposing an application via HTTP\"), \"\\n\", React.createElement(_components.p, null, \"As out first use case, we wil simply expose the \", React.createElement(_components.code, null, \"number-crunch\"), \" API endpoints via ingress.\"), \"\\n\", React.createElement(_components.p, null, \"Create \", React.createElement(_components.code, null, \"ingress.yml\"), \" with this YAML manifest.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-yaml\"\n  }, \"apiVersion: networking.k8s.io/v1\\nkind: Ingress\\nmetadata:\\n  name: number-crunch-ingress\\nspec:\\n  ingressClassName: nginx\\n  rules:\\n  - http:\\n      paths:\\n      - path: /\\n        pathType: Prefix\\n        backend:\\n          service:\\n            name: number-crunch-service\\n            port:\\n              number: 3001\\n\")), \"\\n\", React.createElement(_components.p, null, \"Take note of these key parameters in \", React.createElement(_components.code, null, \"ingress.yml\"), \".\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"ingressClassName\"), \" identifies the Ingress Controller we wish to use.\"), \"\\n\", React.createElement(_components.p, null, \"When there are multiple ingress controllers in a cluster, we can choose the desired ingress controller by specifying this parameter.\"), \"\\n\", React.createElement(_components.p, null, \"If we omit this parameter, Kubernetes will assign the default \", React.createElement(_components.code, null, \"IngressClass\"), \" to our ingress. If we specify a non-existing ingress controller, our ingress would still be created, but Kubernetes will not assign an ingress controller for our ingress. So, traffic cannot be routed.\"), \"\\n\", React.createElement(_components.p, null, \"If you find the your ingress is not being assigned an address, most probably you may have specified a non-existent ingress controller.\"), \"\\n\", React.createElement(_components.p, null, \"You can check the available IngressClasses in your cluster.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"kubectl get ingressclasses\\n\")), \"\\n\", React.createElement(_components.p, null, \"Here's what we got in MicroK8s.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"NAME     CONTROLLER             PARAMETERS   AGE\\npublic   k8s.io/ingress-nginx   <none>       1d\\nnginx    k8s.io/ingress-nginx   <none>       1d\\n\")), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"rules\"), \" define how to route HTTP traffic to the back-end Kubernetes Services. This ingress has just one rule which sends all traffic to \", React.createElement(_components.code, null, \"number-crunch\"), \" Service on port 3001.\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"path\"), \" defines the URL to be matched. \", React.createElement(_components.code, null, \"/\"), \" denotes the root and matches all HTTP requests.\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Create the ingress resource.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"kubectl apply -f ingress.yml\\n\")), \"\\n\", React.createElement(_components.p, null, \"Check the ingress resource.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \" kubectl get ingress\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"NAME                    CLASS    HOSTS   ADDRESS     PORTS   AGE\\nnumber-crunch-ingress   public   *       127.0.0.1   80      175m\\n\")), \"\\n\", React.createElement(_components.p, null, \"Note the \", React.createElement(_components.code, null, \"ADDRESS\"), \" and the \", React.createElement(_components.code, null, \"PORTS\"), \" fields. Our application will be available on http://127.0.0.1/xyz.\"), \"\\n\", React.createElement(_components.p, null, \"If the \", React.createElement(_components.code, null, \"ADDRESS\"), \" field is blank, please check the ingress agian in a few minutes.\\nSometimes, Kubernetes may take about one minute to assign the \", React.createElement(_components.code, null, \"ADDRESS\"), \" to a newly-created ingress resource.\"), \"\\n\", React.createElement(_components.p, null, \"Test the \", React.createElement(_components.code, null, \"number-crunch\"), \" application.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"curl http://127.0.0.1/square-root/4\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"{\\\"InputNumber\\\":4,\\\"SquareRoot\\\":2}\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"curl http://127.0.0.1/cube-root/8\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"{\\\"InputNumber\\\":4,\\\"CubeRoot\\\":2}\\n\")), \"\\n\", React.createElement(_components.h1, null, \"Use case #2: Adding a URL prefix\"), \"\\n\", React.createElement(_components.p, null, \"To avoid URL duplications, we shall add the prefix \", React.createElement(_components.code, null, \"number-crunch\"), \" to all URLs in the \", React.createElement(_components.code, null, \"number-crunch\"), \" application.\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 907px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/418e7a4e81748aaff0eeb5f6320ddd0e/142fb/k8s-ingress-number-crunch-1.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 47%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABeElEQVR42n1Si07DMBDr/3/cQEJim5BYx/pa1jZJ82j6NHdZgSEkIlnXVhefz26yzDPWdcW6LHfwcwQwDgOstbDO3esXtndH1VkNZ3T8No4jkoVI/px5BNYZAzUopaBlg0536DqC1ujoXXcGiqppK3h1hVYSgQQkrJCPERkhx0Jkq6sBgvMBts4AlaJrKrRSw8sK0BnkrUTdNLBNAdeWcdDwSKhEAUVNTDioEpMhwj5AVSnM+RmqrohAoi5O6KsjRJmhrqlHClIoiFBthNvK0zRh2sg/Ps5o2zZ6eblcsNs90WVazxi8n07YHw4oypKsaKNyS6S88i/CnzBWLFs4IYTooSG/NHtHHnLlYVw1+fp23OP4+oKquv4Tyna4gVVZa2LlVH3fIxC895SwhaSBDB72rZDV8EQ2WUoZFTjnKbWRLvLlEC1hz9iCNE2R5zka6n/cipHM5Bs/TKSGFUUvt8oTee0hDODwOMnb7QYhBGqqrBAP/zD3fAJsALYpCOcs9AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"number-crunch application deployment\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/418e7a4e81748aaff0eeb5f6320ddd0e/142fb/k8s-ingress-number-crunch-1.png\\\"\\n        srcset=\\\"/static/418e7a4e81748aaff0eeb5f6320ddd0e/5a46d/k8s-ingress-number-crunch-1.png 300w,\\n/static/418e7a4e81748aaff0eeb5f6320ddd0e/0a47e/k8s-ingress-number-crunch-1.png 600w,\\n/static/418e7a4e81748aaff0eeb5f6320ddd0e/142fb/k8s-ingress-number-crunch-1.png 907w\\\"\\n        sizes=\\\"(max-width: 907px) 100vw, 907px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.em, null, \"number-crunch application deployment\")), \"\\n\", React.createElement(_components.p, null, \"Update the \", React.createElement(_components.code, null, \"ingress.yml\"), \" as below.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-yaml\"\n  }, \"apiVersion: networking.k8s.io/v1\\nkind: Ingress\\nmetadata:\\n  name: number-crunch-ingress\\n  annotations:\\n    nginx.ingress.kubernetes.io/use-regex: \\\"true\\\"\\n    nginx.ingress.kubernetes.io/rewrite-target: /$1\\nspec:\\n  ingressClassName: nginx\\n  rules:\\n  - http:\\n      paths:\\n      - path: /number-crunch/(.*)\\n        pathType: Prefix\\n        backend:\\n          service:\\n            name: number-crunch-service\\n            port:\\n              number: 3001\\n\")), \"\\n\", React.createElement(_components.p, null, \"In this manifest, we are using ingress \", React.createElement(_components.code, null, \"annotations\"), \" to manipulate the URLs using regular expressions.\"), \"\\n\", React.createElement(_components.p, null, \"We define the new \", React.createElement(_components.code, null, \"path\"), \" as \", React.createElement(_components.code, null, \"/number-crunch/(.*)\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"The string inside paranthesis is called a Capturing Group in a regular expression. We define one capturing group \", React.createElement(_components.code, null, \"(.*)\"), \" which captures all characters after \", React.createElement(_components.code, null, \"/number-crunch/\"), \" in the URL.\"), \"\\n\", React.createElement(_components.p, null, \"The characters matching a capturing group is copied to numbered placeholders like $1, $2, $n. Since we have only one capture group, all characters after the \", React.createElement(_components.code, null, \"/number-crunch/\"), \" in the URL is copied to \", React.createElement(_components.code, null, \"$1\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"As an example, if the URL in the HTTP request is \", React.createElement(_components.code, null, \"number-crunch/square-root/4\"), \", the characters \", React.createElement(_components.code, null, \"square-root/4\"), \" will be available in \", React.createElement(_components.code, null, \"$1\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Then, we use \", React.createElement(_components.code, null, \"$1\"), \" as the \", React.createElement(_components.code, null, \"rewrite-target\"), \". This effectively truncates the string \", React.createElement(_components.code, null, \"number-crunch/\"), \" from the incoming HTTP requests and the traffic to the \", React.createElement(_components.code, null, \"number-crunch-service\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Let's update the ingress resource.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"kubectl apply -f ingress.yml\\n\")), \"\\n\", React.createElement(_components.p, null, \"Test the updated URL endpoints.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"curl http://127.0.0.1:80/number-crunch/square-root/16\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"{\\\"InputNumber\\\":16,\\\"SquareRoot\\\":4}\\n\")), \"\\n\", React.createElement(_components.p, null, \"You may appreciate that we did not have to change anything in our application for this change of the URLs.\"), \"\\n\", React.createElement(_components.h1, null, \"Use case #3: number-crunch-2\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 974px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/818764d89dfc716c8771a97efee89f40/09e48/k8s-ingress-number-crunch-2.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 57.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABxklEQVR42n2TaY+bQAyG8/9/2+6HbrbtHkoUCJkEmPtKOMJbe+ipdjuSJTOY148PNvM8Y1mWv+x6vSLGiJQScs6wxqA5nSDEGYb8K93l6H6+ZxvHEZv7/Y5/HRaz1sI5V4z9z9tP+PL8BKk0vLogmRZGtdDaQCmF2+32sSBnds7D+4AQAhFqTOaIUVdoux5enjFZgXNT42n7jLquV8KFBFebi9AyRCzzSIIZ3nQIVhYCKSWSFkjqVJ4dCUZ9gdM9tUIUwmEYSJBEwqWCO1eYxhuQW8zZwmiFWe8xyD26rlspidY6Jo4lUVYNgrMlOb8vJYMUcwzIKTIfpDjglgMSNbl62+K0/1qGwATBSETTw1A/raQeur4QKiLWWv/qIU+VD/u9pOYSes4Jh7rBsRElO38w2SNmc0DbdnA0jNE06ESDh8dH7Ha7teT/DYUnzea9J0KNaveC4/6VBNsimG2P6BRVsG7Dh4JMzELut7UJJPpOFK9v7/BEHDzdU9nOmpKQY0rJvNg8blZnn42T8GKX5odUfO6hEAKClvt8WZd7GKci8sOmacKGSTi47/vSJw5ct36moAFXMibmmFP5U0SJZYDv9fxR2TcG60ym7JfB8AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"number-crunch-2\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/818764d89dfc716c8771a97efee89f40/09e48/k8s-ingress-number-crunch-2.png\\\"\\n        srcset=\\\"/static/818764d89dfc716c8771a97efee89f40/5a46d/k8s-ingress-number-crunch-2.png 300w,\\n/static/818764d89dfc716c8771a97efee89f40/0a47e/k8s-ingress-number-crunch-2.png 600w,\\n/static/818764d89dfc716c8771a97efee89f40/09e48/k8s-ingress-number-crunch-2.png 974w\\\"\\n        sizes=\\\"(max-width: 974px) 100vw, 974px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.em, null, \"number-crunch-2\")), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.code, null, \"number-crunch\"), \" is gaining popularity. We are getting millions of requests everyday.\"), \"\\n\", React.createElement(\"span\", null, React.createElement(_components.p, null, \"\")), \"\\n\", React.createElement(_components.p, null, \"We want to make \", React.createElement(_components.code, null, \"number-crunch\"), \" more scalable. So, we split the \", React.createElement(_components.code, null, \"square-root\"), \" and \", React.createElement(_components.code, null, \"cube-root\"), \" API end-points to two different micro-services and create \", React.createElement(_components.a, {\n    href: \"https://github.com/cloudqubes/number-crunch-2\"\n  }, \"number-crunch-2\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"We want to upgrade to \", React.createElement(_components.code, null, \"number-crucnch-2\"), \" without disturbing our clients.\"), \"\\n\", React.createElement(_components.p, null, \"We can easily achieve this by manipulating URLs in ingress.\"), \"\\n\", React.createElement(_components.p, null, \"Let's deploy the two microservices.\"), \"\\n\", React.createElement(_components.p, null, \"Create \", React.createElement(_components.code, null, \"square-root.yml\"), \" manifest.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-yaml\"\n  }, \"apiVersion: apps/v1\\nkind: Deployment\\nmetadata:\\n  name: square-root-app\\nspec:\\n  selector:\\n    matchLabels:\\n      app: square-root-app\\n  replicas: 2 \\n  template:\\n    metadata:\\n      labels:\\n        app: square-root-app\\n    spec:\\n      containers:\\n      - name: square-root-app\\n        image: cloudqubes/square-root:2.0.1\\n        ports:\\n        - containerPort: 8080\\n---\\napiVersion: v1\\nkind: Service\\nmetadata:\\n  name: square-root-service\\nspec:\\n  selector:\\n    app: square-root-app\\n  ports:\\n  - name: square-root-service-port\\n    protocol: TCP\\n    port: 3001\\n    targetPort: 8080\\n\\n\")), \"\\n\", React.createElement(_components.p, null, \"Deploy \", React.createElement(_components.code, null, \"square-root\"), \" micro-service.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"kubectl apply -f square-root.yml\\n\")), \"\\n\", React.createElement(_components.p, null, \"Create \", React.createElement(_components.code, null, \"cube-root.yml\"), \" manifest.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-yaml\"\n  }, \"apiVersion: apps/v1\\nkind: Deployment\\nmetadata:\\n  name: cube-root-app\\nspec:\\n  selector:\\n    matchLabels:\\n      app: cube-root-app\\n  replicas: 2 \\n  template:\\n    metadata:\\n      labels:\\n        app: cube-root-app\\n    spec:\\n      containers:\\n      - name: cube-root-app\\n        image: cloudqubes/cube-root:2.0.1\\n        ports:\\n        - containerPort: 8080\\n---\\napiVersion: v1\\nkind: Service\\nmetadata:\\n  name: cube-root-service\\nspec:\\n  selector:\\n    app: cube-root-app\\n  ports:\\n  - name: cube-root-service-port\\n    protocol: TCP\\n    port: 3001\\n    targetPort: 8080\\n\")), \"\\n\", React.createElement(_components.p, null, \"Deploy \", React.createElement(_components.code, null, \"cube-root\"), \" micro-service.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"kubectl apply -f cube-root.yml\\n\")), \"\\n\", React.createElement(_components.p, null, \"Check the deployments and the Services.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"kubectl get deployments\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"NAME               READY   UP-TO-DATE   AVAILABLE   AGE\\nsquare-root-app    2/2     2            2           10m\\ncube-root-app      2/2     2            2           10m\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"kubectl get services\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"NAME                  TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE\\nsquare-root-service   ClusterIP      10.152.183.195   <none>        3001/TCP         12m\\ncube-root-service     ClusterIP      10.152.183.104   <none>        3001/TCP         12m\\n\")), \"\\n\", React.createElement(_components.p, null, \"Update \", React.createElement(_components.code, null, \"ingress.yml\"), \".\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-yaml\"\n  }, \"apiVersion: networking.k8s.io/v1\\nkind: Ingress\\nmetadata:\\n  name: number-crunch-2-ingress\\n  annotations:\\n    nginx.ingress.kubernetes.io/use-regex: \\\"true\\\"\\n    nginx.ingress.kubernetes.io/rewrite-target: /$1/$2\\nspec:\\n  ingressClassName: nginx\\n  rules:\\n  - http:\\n      paths:\\n      - path: /number-crunch/(square-root)/(.*)?$\\n        pathType: Prefix\\n        backend:\\n          service:\\n            name: square-root-service\\n            port:\\n              number: 3001\\n      - path: /number-crunch/(cube-root)/(.*)?$\\n        pathType: Prefix\\n        backend:\\n          service:\\n            name: cube-root-service\\n            port:\\n              number: 3001\\n\")), \"\\n\", React.createElement(_components.p, null, \"We have added two rules - one for each micro-service. The \", React.createElement(_components.code, null, \"path\"), \" in each rule defines two capturing groups, which copy the matching characters to \", React.createElement(_components.code, null, \"$1\"), \" and \", React.createElement(_components.code, null, \"$2\"), \" respectively.\"), \"\\n\", React.createElement(_components.p, null, \"In the annotation \", React.createElement(_components.code, null, \"rewrite-target\"), \" we use \", React.createElement(_components.code, null, \"/$1/$2\"), \" so effectively removing the \", React.createElement(_components.code, null, \"number-crunch/\"), \" part in the URL.\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 689px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/bd18e74746a58d843b84a1f8c0a49b64/0f79a/k8s-ingress-capturing-group.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 36.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABAklEQVR42qWRW2rDMBBFs7VA9hZospssJO53Pkrj4NqVrYcl23rZtxolbimUfrQDF82MhsM8NjFGLMuC1eI8g0LK/ar5/s6pnhghhBxvCGWKAtfDAeXxiKA1etdDDhyTH9FPEsZqyJFjcBqjM9BWwUULPSmE6HMjBCZloD6fE/AJr/s9gpTglqPTTQZw02YoHxgaUUEkMOVayaAmARfcd+BMY/Y9xssFtixpVsQlwkeXxg933zt4ZSDKN0xcQdcMomoyaF3XJ5CC9nRCsd3iebeDZwzSSdy6F6jUTWfewfoaFb8mv0mr6FCLW+rM/gykIzx+8B/7AqYLkXLi4f9F65U/AGQ8HA8TyLNGAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"Capturing groups for number-crunch-2\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/bd18e74746a58d843b84a1f8c0a49b64/0f79a/k8s-ingress-capturing-group.png\\\"\\n        srcset=\\\"/static/bd18e74746a58d843b84a1f8c0a49b64/5a46d/k8s-ingress-capturing-group.png 300w,\\n/static/bd18e74746a58d843b84a1f8c0a49b64/0a47e/k8s-ingress-capturing-group.png 600w,\\n/static/bd18e74746a58d843b84a1f8c0a49b64/0f79a/k8s-ingress-capturing-group.png 689w\\\"\\n        sizes=\\\"(max-width: 689px) 100vw, 689px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.em, null, \"Capturing groups for number-crunch-2\")), \"\\n\", React.createElement(_components.p, null, \"Let's update the ingress.\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"kubectl apply -f ingress.yml\\n\")), \"\\n\", React.createElement(_components.p, null, \"Test the API end-points with \", React.createElement(_components.code, null, \"curl\"), \".\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"curl http://127.0.0.1:80/number-crunch/square-root/16\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"{\\\"InputNumber\\\":16,\\\"SquareRoot\\\":4}\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"curl http://127.0.0.1:80/number-crunch/cube-root/16\\n\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-shell\"\n  }, \"{\\\"InputNumber\\\":16,\\\"CubeRoot\\\":2.5198420997897464}\\n\")), \"\\n\", React.createElement(_components.h1, null, \"Ingress in production\"), \"\\n\", React.createElement(_components.p, null, \"Ingress is the preferred method for routing external HTTP and HTTPS traffic to applications inside a Kubernetes cluster.\"), \"\\n\", React.createElement(_components.p, null, \"We demonstrated three HTTP routing use cases with \", React.createElement(_components.a, {\n    href: \"https://github.com/kubernetes/ingress-nginx\"\n  }, \"Ingress NGINX Controller\"), \" in a \", React.createElement(_components.a, {\n    href: \"https://microk8s.io\"\n  }, \"MicroK8s\"), \" cluster.\"), \"\\n\", React.createElement(_components.p, null, \"If you are using a different ingress controller, please refer the relevant documentation as the features and functions may vary across different ingress controller implementations.\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import GATSBY_COMPILED_MDX from \"/Users/indika/projects/cloudqubes/gatsby/cloudqubes/blog/how-to-use-ingress/index.mdx\";\nimport * as React from 'react';\nimport {graphql} from \"gatsby\";\nimport Layout from '../../components/layout';\nimport {Seo} from \"../../components/seo\";\nimport {outerContainer, container, title, postMeta} from \"./article.module.css\";\nimport \"./article.css\";\nconst BlogPost = ({data, children}) => {\n  return React.createElement(Layout, {\n    pageTitle: data.mdx.frontmatter.title\n  }, React.createElement(\"div\", {\n    className: outerContainer\n  }, React.createElement(\"article\", {\n    className: container\n  }, React.createElement(\"div\", null, React.createElement(\"span\", {\n    className: postMeta\n  }, data.mdx.frontmatter.date, \" - \"), React.createElement(\"span\", {\n    className: postMeta\n  }, data.mdx.fields.timeToRead.text)), React.createElement(\"h1\", {\n    className: title\n  }, data.mdx.frontmatter.title), children)));\n};\nexport const query = graphql`\n  query ($id: String) {\n    mdx(id: {eq: $id}) {\n      frontmatter {\n        title\n        description\n        tags\n        date(formatString: \"MMMM D, YYYY\")\n      }\n      fields{\n        timeToRead {\n          minutes\n          text\n          time\n          words\n        }\n      }\n    }\n  }\n`;\nexport const Head = ({data}) => React.createElement(Seo, {\n  title: data.mdx.frontmatter.title,\n  description: data.mdx.frontmatter.description\n});\nBlogPost\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(BlogPost, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\n","import { graphql, useStaticQuery } from \"gatsby\"\n\nexport const useSiteMetadata = () => {\n  const data = useStaticQuery(graphql`\n    query {\n      site {\n        siteMetadata {\n          title\n          description\n          twitterUsername\n          image\n          siteUrl\n        }\n      }\n    }\n  `)\n\n  return data.site.siteMetadata\n}\n","import React from \"react\";\nimport { useSiteMetadata } from \"../hooks/use-site-metadata\";\n\nexport const Seo = ({ title, description, pathname, children }) => {\n  const {title: defaultTitle, description: defaultDescription, image, siteUrl, twitterUsername} = useSiteMetadata()\n\n  const seo = {\n    title: title || defaultTitle,\n    description: description || defaultDescription,\n    image: `${siteUrl}${image}`,\n    url: `${siteUrl}${pathname || ''}`,\n    twitterUsername,\n  }\n\n  return (\n    <>\n      <title>{seo.title}</title>\n      <meta name=\"description\" content={seo.description}/>\n      <meta name=\"image\" content={seo.image} />\n      <meta name=\"twitter:card\" content=\"summary_large_image\" />\n      <meta name=\"twitter:title\" content={seo.title} />\n      <meta name=\"twitter:url\" content={seo.url} />\n      <meta name=\"twitter:description\" content={seo.description} />\n      <meta name=\"twitter:image\" content={seo.image} />\n      <meta name=\"twitter:creator\" content={seo.twitterUsername} />\n      <link rel=\"icon\" href=\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>👤</text></svg>\" />\n      {children}\n\n    </>\n  )\n}\n","// extracted by mini-css-extract-plugin\nexport var container = \"article-module--container--2d8cc\";\nexport var outerContainer = \"article-module--outerContainer--119e3\";\nexport var postMeta = \"article-module--post-meta--34964\";\nexport var title = \"article-module--title--f5d32\";","/**\n * @typedef {import('react').ReactNode} ReactNode\n * @typedef {import('mdx/types.js').MDXComponents} Components\n *\n * @typedef Props\n *   Configuration.\n * @property {Components | MergeComponents | null | undefined} [components]\n *   Mapping of names for JSX components to React components.\n * @property {boolean | null | undefined} [disableParentContext=false]\n *   Turn off outer component context.\n * @property {ReactNode | null | undefined} [children]\n *   Children.\n *\n * @callback MergeComponents\n *   Custom merge function.\n * @param {Components} currentComponents\n *   Current components from the context.\n * @returns {Components}\n *   Merged components.\n */\n\nimport React from 'react'\n\n/**\n * @type {import('react').Context<Components>}\n * @deprecated\n *   This export is marked as a legacy feature.\n *   That means it’s no longer recommended for use as it might be removed\n *   in a future major release.\n *\n *   Please use `useMDXComponents` to get context based components and\n *   `MDXProvider` to set context based components instead.\n */\nexport const MDXContext = React.createContext({})\n\n/**\n * @param {import('react').ComponentType<any>} Component\n * @deprecated\n *   This export is marked as a legacy feature.\n *   That means it’s no longer recommended for use as it might be removed\n *   in a future major release.\n *\n *   Please use `useMDXComponents` to get context based components instead.\n */\nexport function withMDXComponents(Component) {\n  return boundMDXComponent\n\n  /**\n   * @param {Record<string, unknown> & {components?: Components | null | undefined}} props\n   * @returns {JSX.Element}\n   */\n  function boundMDXComponent(props) {\n    const allComponents = useMDXComponents(props.components)\n    return React.createElement(Component, {...props, allComponents})\n  }\n}\n\n/**\n * Get current components from the MDX Context.\n *\n * @param {Components | MergeComponents | null | undefined} [components]\n *   Additional components to use or a function that takes the current\n *   components and filters/merges/changes them.\n * @returns {Components}\n *   Current components.\n */\nexport function useMDXComponents(components) {\n  const contextComponents = React.useContext(MDXContext)\n\n  // Memoize to avoid unnecessary top-level context changes\n  return React.useMemo(() => {\n    // Custom merge via a function prop\n    if (typeof components === 'function') {\n      return components(contextComponents)\n    }\n\n    return {...contextComponents, ...components}\n  }, [contextComponents, components])\n}\n\n/** @type {Components} */\nconst emptyObject = {}\n\n/**\n * Provider for MDX context\n *\n * @param {Props} props\n * @returns {JSX.Element}\n */\nexport function MDXProvider({components, children, disableParentContext}) {\n  /** @type {Components} */\n  let allComponents\n\n  if (disableParentContext) {\n    allComponents =\n      typeof components === 'function'\n        ? components({})\n        : components || emptyObject\n  } else {\n    allComponents = useMDXComponents(components)\n  }\n\n  return React.createElement(\n    MDXContext.Provider,\n    {value: allComponents},\n    children\n  )\n}\n"],"names":["_createMdxContent","props","_components","Object","assign","p","a","span","em","h1","pre","code","h2","ul","li","strong","_provideComponents","components","React","class","href","dangerouslySetInnerHTML","__html","className","wrapper","MDXLayout","BlogPost","_ref","data","children","Layout","pageTitle","mdx","frontmatter","title","outerContainer","container","postMeta","date","fields","timeToRead","text","Head","_ref2","Seo","description","GatsbyMDXWrapper","GATSBY_COMPILED_MDX","pathname","defaultTitle","defaultDescription","image","siteUrl","twitterUsername","useStaticQuery","site","siteMetadata","seo","url","name","content","rel","MDXContext","useMDXComponents","contextComponents"],"sourceRoot":""}